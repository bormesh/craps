<!DOCTYPE html>

<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Learn craps</title>
<link href="/scripts/novus/src/nv.d3.css" rel="stylesheet" type="text/css">
<link
    href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"
    rel='stylesheet'
    type="text/css">

<script type="text/javascript"
    src="http://codeorigin.jquery.com/jquery-2.0.3.min.js"></script>

<script src="/scripts/novus/lib/d3.v3.js"></script>
<script src="/scripts/novus/nv.d3.js"></script>
<script src="/scripts/novus/src/models/legend.js"></script>
<script src="/scripts/novus/src/models/line.js"></script>
<script src="/scripts/novus/src/utils.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body>

<div class="container">
<h1>Craps! How to win everytime!*</h1>
<sub>*or at least once in a while</sub>

<h3>The pass bet</h3>

<p>This might not be the easiest bet for a newbie to learn, but
it's the best place to start. Craps is a game of points. There
is one person who rolls the dice. He's called the <strong>shooter</strong>
You'll often see the shooter in television
commercials for casinos (the person with the impish smile and two
girls in shiny dresses to either side). The goal of shooter is
to make as many points as possible.</p>

<p>So first off, what's a point?

<strong>Points are</strong> the numbers <strong>4, 5, 6, 8, 9, and 10</strong>.
Points are made by the shooter rolling the dice and the two numbers adding up together
to one of the points. </p>

<p>Ok, straightforward so far. Now here's the wrinkle. Craps is played in rounds, where
a round is ended when the shooter gives the dice to the next player in line. There are
two phases to a round, the <strong>come-out</strong> phase and the <strong> point </strong>
phase.</p>

<h3>Come-out Phase</h3>

<p>
The goal of the come-out phase is to establish a point. That is, the player is
trying to roll one of the numbers above that we have established as points (4, 5, 6, 8, 9 or 10).

<p><img src="img/passline.jpg" class="img-rounded" width="120px" style="float:right" />
You may ask yourself, what about the other numbers? namely 2, 3, 7, 11, and 12? These numbers
are not points. They can all be good or bad depending on the bet. In the come-out phase, the a player
must bet on the <strong>pass line</strong> or the <strong>do not pass line</strong>.



</p>
<p>Let's say the shooter has put $10 down on the <strong>pass line</strong>. There are 3 outcomes from
any roll when we are in the come-out phase and the shooter has money bet on the <strong>pass line</strong>.

<ol>
 <li> The shooter rolls one of the points (4, 5, 6, 8, 9, or 10) and the game enters the next phase.
      The money on the pass line stays put
 </li>

 <li> The shooter rolls a 7 or 11 (in this case, called a <strong>natural</strong>.
      This is a win for anyone with money on the pass line. Our shooter wins $10 (how much he had on the past line).
      He is still the shooter and must roll again, but now he's got $10 more!
 </li>

 <li> The shooter rolls a 2, 3, or 12. This is where the game gets it's name as this roll is called <strong>craps</strong>.
      Anyone with money on the pass line loses the money. So our shooter loses his $10. If the shooter wishes he may
      place another bet on the pass-line to continue shooting.
 </li>
</ul>

</p>

<p>So let's do a sample roll. Imagine we had bet $10. After you click 'Roll', you will see your dice value
and also the result of the bet.</p>


<div class="well">
<p>Phase:Come-Out | Puck is 'Off'</p>
<img id="d1" src="img/dice_0.png" /> <img id="d2" src="img/dice_0.png" />
<span style="margin-left:20px; font-size:24px">You rolled a(n) :
<span id="rollvalue" style="font-weight:800; font-size:36px"></span></span>
<span id="betresult" style="margin-left:20px font-size:36px"></span>
<button id="rollbtn" class="btn btn-primary" style="display:block; margin-top:10px;">Roll!</button>
</div>

<h3>The point phase</h3>
<p>
Once a come-out number has been established, the dealer's puck is flipped to on. At
this point, the shooter's job is to hit the same number again that he established as
the point.
</p>

<p>
During the point phase, players can make bets on numbers hitting before a
7 occurs. When a 7 occurs, all bets are wiped off the table, and the dice
passes to the next player who then becomes the shooter</p>

<p>
Let's keep things simple and explore betting just the pass line.
When you put your money down, you have a 8/36 chance of winning
immediately (6 combinations to make 7 and 2 combinations to make 11).
You also have 4/36 chance to lose immediately (this is 1 combination
for 2, 2 combinations for 3 and 1 combination for 12).
</p>
<p>
The attentive math student will see that 8/36  = 2/9 = <strong>22%</strong> chance
of winning immidiately. Losing immediately is 4/36 = 1/9 = <strong>11%</strong>.
</p>

<p>The remaining <strong>66%</strong> of the time, the game will entire the points
phase, that is 2 out of every 3 rolls from the come-out phase should enter the
points phase. Once we enter the points phase, the only roll that will
win money for the player is one in which his point comes up.
</p>

<p>
Since each number has different odds of winning, a player is allowed to bet
odds that will be payed in addition to his pass-line bet. We'll keep things
simple for now, and just assume the player will get paid 1:1 for his pass-line bet
</p>

<p>
So if our shooter rolls a 6, on every roll he has a 5/36 chance of winning.
He also has a 6/36 chance of losing (since rolling a 7 will end the round).
The other 25 rolls are safe. They don't end the round, but also don't make
the shooter money if he just bets the pass round.
<p>

<p>
Let's run an experiment. Say our shooter starts out with $100. Let's
graph his money if he only bets the pass-line. We'll go until
he runs out of money.
<p>

<div class="well">
<h3>Start money: $<input type="number" name="bankroll"
                         id="sim1_bankroll" value="100" style="width:80px" /> |
Bet Size: $<input type="number" name="bet"
                         id="sim1_bet" value="10" style="width:80px" /> |
Lay Odds: $<input type="number" name="odds"
                         id="sim1_odds" value="0" style="width:80px" /></h3>
Max Rolls by Shooter:<span id="sim_max_rolls_by_shooter"></span>
<br />

<button id="sim1btn" class="btn btn-primary" style="display:block; margin-top:10px;">Simulate!</button>

<div id="chart">
<svg >

</svg>
</div>


</div>

</body>

<script type="text/javascript">

$(document).ready(function () {

 dice_srcs = new Array();

 dice_srcs[0] = 'img/dice_1.png';
 dice_srcs[1] = 'img/dice_2.png';
 dice_srcs[2] = 'img/dice_3.png';
 dice_srcs[3] = 'img/dice_4.png';
 dice_srcs[4] = 'img/dice_5.png';
 dice_srcs[5] = 'img/dice_6.png';

$('#rollbtn').on('click', function()
 {
    //reset betresult and rollvalue
    $('#betresult').html('');
    $('#rollvalue').html('');
    var i = 0;
    var randomnum1 = 0;
    var randomnum2 = 0;
    var change_dice = setInterval(function()
    {
       i++;
       randomnum1 = Math.floor(Math.random()*6);
       randomnum2 = Math.floor(Math.random()*6);
       $('#d1').attr('src', dice_srcs[randomnum1]);
       $('#d2').attr('src', dice_srcs[randomnum2]);
    }, 100);

    setTimeout(function(){

       clearInterval(change_dice);

       rollvalue = randomnum1 + randomnum2 + 2 //random num is 0 -5
       $('#rollvalue').html(rollvalue);

       if (rollvalue == 7 || rollvalue == 11)
       {
         $('#betresult').html('You won $10!');
       }
       else if(rollvalue == 2 || rollvalue == 12 || rollvalue == 3)
       {
         $('#betresult').html('You lost $10!');
       }
       else
       {
         $('#betresult').html('Your money stays. We enter the next phase.'
                              + 'The point is <strong>' + rollvalue + '</strong>');
       }


    }, 1000);

 });


/* Simulation 1 Chart */


$('#sim1btn').on('click', function()
 {

   // Let's simulate rolling until we run out of money

   var bankroll = parseInt($('#sim1_bankroll').val());
   var bet = parseInt($('#sim1_bet').val());
   var odds_bet = parseInt($('#sim1_odds').val());
   var rolls_array = new Array();
   var rolls = 0;
   var rolls_by_shooter = 0;
   var max_rolls_by_shooter = 0;
   var rolls = 0;
   var maxmoney = bankroll;

   var point = -1;
   rolls_array.push(bankroll)

   while(bankroll > 0)
   {
      rolls++;
      rolls_by_shooter++;
      //pick 2 numbers
      dice1 = Math.floor(Math.random()*6);
      dice2 = Math.floor(Math.random()*6);

      total_roll = dice1 + dice2 + 2;

      if (point > 0 && point == total_roll)
      {
       // winner!
       bankroll = bankroll + bet;
       //add odds too
       odds_win = calculateOdds(point, odds_bet);
       bankroll = bankroll + odds_win;
       point = -1;
      }
      else if(point > 0 && total_roll == 7)
      {
       //loser!
       bankroll = bankroll - bet;
       rolls_by_shooter = 0;

       //subtract odds too
       bankroll = bankroll - odds_bet;
       point = -1;
      }
      else if(point < 0 && (total_roll == 2 || total_roll == 3 || total_roll == 12))
      {
         bankroll = bankroll - bet;
      }
      else if(point < 0 && (total_roll == 7 || total_roll == 11 ))
      {
         //winner!
         bankroll = bankroll + bet;
      }
      else if(point < 0)
      {
        point = total_roll;
      }


     //check max money
     if (bankroll > maxmoney)
     {
       maxmoney = bankroll;
     }

     //check rolls on max
     if(rolls_by_shooter > max_rolls_by_shooter)
     {
        max_rolls_by_shooter = rolls_by_shooter;
     }

     rolls_array.push(bankroll)

   }

   //update fields
   $('#sim_max_rolls_by_shooter').html(max_rolls_by_shooter);


   nv.addGraph(function() {
    var chart = nv.models.lineChart();

    chart.xAxis
        .axisLabel('Rolls')
        .tickFormat(d3.format(',r'));

    chart.yAxis
        .axisLabel('Bankroll ($)')
       .tickFormat(d3.format('.02f'));

   d3.select('#chart svg')
       .datum(sinAndCos(rolls_array))
     .transition().duration(500)
       .call(chart);

   nv.utils.windowResize(function() { d3.select('#chart svg').call(chart) });

   return chart;
   });

 });




});

function get_simulation_1_data(rolls_array)
{
    dataset = [];

    labels_array = new Array();

    for( var i = 0; i < rolls_array.length; i++)
    {
      labels_array.push(i);
    }

    var data = {
    labels : labels_array,
    datasets : [
        {
            fillColor : "rgba(220,220,220,0.5)",
            strokeColor : "rgba(110,110,110,0.5)",
            pointColor : "rgba(110,110,110,0.5)",
            pointStrokeColor : "#fff",
            data : rolls_array,
        }
      ]
    }

  return data;
}


</script>

<script type="text/javascript">


function calculateOdds(point, odds_bet)
{
  if (point == 4 || point == 10)
  {
     return 2 * odds_bet;
  }
  else if(point == 6 || point == 8)
  {
     return (6 * odds_bet) / 5;
  }
  else
  {
     return (3 * odds_bet) / 2;
  }
}

function sinAndCos(rolls_array) {
  var rolls_bankroll = [];

  for (var i = 0; i < rolls_array.length; i++) {
    rolls_bankroll.push({x: i, y: rolls_array[i]});
  }

  return [
    {
      values: rolls_bankroll,
      key: "Rolls",
      color: "#ff7f0e"
    }  ];
}

</script>


</html>
